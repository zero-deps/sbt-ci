enablePlugins(CiPlugin)

name := "dev-server"

version := "0.1.0"

publish := {}

publishLocal := {}

publishArtifact := false

exportJars := false

publishArtifact in (Compile, packageBin) := false

TaskKey[Unit]("check-assets") := {
  val s = streams.value
  s.log.info("AAAAAAAAAAAAAAA")
  assert(Seq(1,2) contains 1, "1 in " + Seq(1,2))
  ()
}

TaskKey[Seq[File]]("genresource2") <<= (unmanagedResourceDirectories in Compile) map { (dirs) =>
  val file = dirs.head / "bar.txt"
  IO.write(file, "bye")
  Seq(file)
}

TaskKey[Unit]("gulp-default") <<= (crossTarget) map { (crossTarget) =>
  val process = sbt.Process("gulp", Seq("default"))
  val out = (process!!)
  println("output: " + out)
  ()
}